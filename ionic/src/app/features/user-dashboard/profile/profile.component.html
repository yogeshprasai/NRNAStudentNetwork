<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/about-us"></ion-back-button>
    </ion-buttons>
    <ion-title class="app-title">NRNA Youths</ion-title>
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card class="m-3">

    <ion-card-content>

      <ion-card-header>
        <ion-card-subtitle class="white ion-text-center font-size-24">Profile Information</ion-card-subtitle>
        <ion-card-title class="nrna-card-title ion-text-center"></ion-card-title>
      </ion-card-header>

        <ion-alert
                [isOpen]="navigateToStudentNetwork"
                trigger="present-alert"
                header="Any unsaved data will be lost"
                [buttons]="navigateToStudentNetworkButtons"
                [backdropDismiss]="false"
        ></ion-alert>

        <ion-alert
                [isOpen]="successMessageWithLogout"
                trigger="present-alert"
                header="Profile Update Successful! Since Email has changed, Please login again."
                [buttons]="successButtonsWithLogout"
                [backdropDismiss]="false"
        ></ion-alert>

        <ion-alert
                [isOpen]="profileUpdateSuccess"
                trigger="present-alert"
                header="Profile Update Successful!"
                [buttons]="successButtons"
                [backdropDismiss]="false"
        ></ion-alert>

        <ion-alert
                [isOpen]="wantToBeRemovedAsVolunteer"
                trigger="present-alert"
                header="Do you want to remove yourself as a volunteer ?"
                [buttons]="cancelOkButtonsForVolunteer"
                [backdropDismiss]="false"
        ></ion-alert>
      
      <form [formGroup]="profileForm">
          <div *ngIf="profilePicture">
              <img src={{profilePicture}}>
          </div>
          <div *ngIf="!profilePicture">
              <img src="../../../../../assets/icon/defaultProfilePic.jpeg">
          </div>

          <ion-list class="mt-3">
              <div class="profile-pic-icons">
                  <ion-button fill="clear" (click)="uploadFromCameraOrGallery()">
                      <ion-icon slot="icon-only" name="cloud-upload"></ion-icon>Upload
                  </ion-button>
                  <ion-button fill="clear" (click)="deleteImage()" *ngIf="profilePicture">
                      <ion-icon slot="icon-only" name="trash"></ion-icon>
                  </ion-button>
              </div>
          </ion-list>
          <nrna-error *ngIf="!profileForm.get('profilePicture')?.value" [form]="profileForm" [controlName]="'profilePicture'" [page]="'profile'"></nrna-error>


          <ion-item class="mt-3">
            <ion-input label="First Name*" formControlName="firstName" placeholder="First Name" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'firstName'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
              <ion-input label="Middle Name" formControlName="middleName" placeholder="Middle Name" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'middleName'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
            <ion-input label="LastName*" formControlName="lastName" placeholder="Last Name" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'lastName'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
            <ion-toggle aria-label="Phone Number Toggle" color="success" formControlName="isStudent">Are you a Student?</ion-toggle>
          </ion-item>
          <div class="nrna-flex-center">
            <ion-button fill="outline" size="small" class="font-size-12 ml-3 nrna-link" (click)="navigateTo()">View in Student Network</ion-button>
          </div>

          <div *ngIf="profileForm.get('university')?.value && profileForm.get('isStudent')?.value" class="mt-2 nrna-flex">
            <p class="font-size-16 font-color-black">Selected University: </p>
            <ion-text color="tertiary" class="ml-2">{{profileForm.get('university')?.value}}</ion-text>
          </div>
          <nrna-error *ngIf="profileForm.get('isStudent')?.value" [form]="profileForm" [controlName]="'university'" [page]="'profile'"></nrna-error>

          <ion-button size="small" color="primary" expand="full" class="mt-3"
                    (click)="openPopOver($event)" *ngIf="profileForm.get('isStudent')?.value">Select University</ion-button>


          <ion-item class="mt-3">
            <ion-input label="Email*" formControlName="email" placeholder="Enter Email Address" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'email'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
            <ion-input label="Phone No*" formControlName="phoneNumber" placeholder="Enter Phone Number" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'phoneNumber'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3" *ngIf="profileForm.get('isVolunteer')?.value || originalProfileValues.isVolunteer">
            <ion-toggle aria-label="Is Volunteer" color="success" formControlName="isVolunteer">Volunteer</ion-toggle>
          </ion-item>

          <ion-item class="mt-3" *ngIf="!originalProfileValues.isVolunteer">
            <ion-toggle aria-label="Apply For Volunteer" color="success" formControlName="isApplyForVolunteer">Apply for Volunteer</ion-toggle>
          </ion-item>
          <div class="font-size-12" *ngIf="!originalProfileValues.isVolunteer">* Subject to approval by admin</div>


          <ion-item class="mt-3">
            <ion-input label="City" formControlName="city" placeholder="Enter City" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'city'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
            <ion-select label="State" placeholder="Select State" formControlName = "state">
              <ion-select-option *ngFor="let state of statesList">{{state.name}}</ion-select-option>
            </ion-select>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'state'" [page]="'profile'"></nrna-error>

          <ion-item class="mt-3">
            <ion-input label="Zip Code" formControlName="zipCode" placeholder="Enter Zip Code" class="ion-text-right"></ion-input>
          </ion-item>
          <nrna-error [form]="profileForm" [controlName]="'zipCode'" [page]="'profile'"></nrna-error>

          <ion-label>Privacy</ion-label>
          <ion-item class="mt-3">
            <ion-toggle aria-label="Phone Number Toggle" color="success" formControlName="showPhoneNumber">Show Phone Number</ion-toggle>
          </ion-item>

          <div class="ion-text-center mt-3" (click)="submitProfileForm()"><ion-button>Submit</ion-button></div>

    </form>

    </ion-card-content>

  </ion-card>

</ion-content>