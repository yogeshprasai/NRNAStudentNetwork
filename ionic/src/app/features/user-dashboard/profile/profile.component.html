<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/volunteer-communication"></ion-back-button>
    </ion-buttons>
    <ion-title class="app-title">NRNA Student Network Profile Page</ion-title>
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card class="white">

    <ion-card-content>

      <ion-card-header>
        <ion-card-subtitle class="white ion-text-center font-size-24">Profile Information</ion-card-subtitle>
        <ion-card-title class="nrna-card-title ion-text-center"></ion-card-title>
      </ion-card-header>

        <ion-alert
                [isOpen]="successMessageWithLogout"
                trigger="present-alert"
                header="Profile Update Successful! Since Email has changed, Please login again."
                [buttons]="successButtonsWithLogout"
        ></ion-alert>

        <ion-alert
                [isOpen]="profileUpdateSuccess"
                trigger="present-alert"
                header="Profile Update Successful!"
                [buttons]="successButtons"
        ></ion-alert>
      
      <form [formGroup]="profileForm">
          <div *ngIf="profilePicture">
              <img src={{profilePicture}}>
          </div>
          <div *ngIf="!profilePicture">
              <img src="../../../../../assets/icon/defaultProfilePic.jpeg">
          </div>

          <ion-list>
              <div class="profile-pic-icons">
                  <ion-button fill="clear" (click)="uploadFromCameraOrGallery()">
                      <ion-icon slot="icon-only" name="cloud-upload"></ion-icon>Upload
                  </ion-button>
                  <ion-button fill="clear" (click)="deleteImage()" *ngIf="profilePicture">
                      <ion-icon slot="icon-only" name="trash"></ion-icon>
                  </ion-button>
              </div>
          </ion-list>
          <nrna-error *ngIf="!profileForm.get('profilePicture')?.value" [form]="profileForm" [controlName]="'profilePicture'" [page]="'profile'"></nrna-error>


          <ion-item class="mt-3">
          <ion-input label="First Name*" formControlName="firstName" placeholder="First Name" class="ion-text-right"></ion-input>
        </ion-item>
        <nrna-error [form]="profileForm" [controlName]="'firstName'" [page]="'profile'"></nrna-error>

        <ion-item class="mt-3">
          <ion-input label="Middle Name" formControlName="middleName" placeholder="Middle Name" class="ion-text-right"></ion-input>
        </ion-item>
        <nrna-error [form]="profileForm" [controlName]="'middleName'" [page]="'profile'"></nrna-error>

        <ion-item class="mt-3">
          <ion-input label="LastName*" formControlName="lastName" placeholder="Last Name" class="ion-text-right"></ion-input>
        </ion-item>
        <nrna-error [form]="profileForm" [controlName]="'lastName'" [page]="'profile'"></nrna-error>

      <ion-item class="mt-3">
        <ion-input label="Email*" formControlName="email" placeholder="Enter Email Address" class="ion-text-right"></ion-input>
      </ion-item>
      <nrna-error [form]="profileForm" [controlName]="'email'" [page]="'profile'"></nrna-error>

      <ion-item class="mt-3">
        <ion-input label="Phone No*" formControlName="phoneNumber" placeholder="Enter Phone Number" class="ion-text-right"></ion-input>
      </ion-item>
      <nrna-error [form]="profileForm" [controlName]="'phoneNumber'" [page]="'profile'"></nrna-error>

      <ion-item class="mt-3" *ngIf="profileForm.get('isVolunteer')?.value">
          <ion-checkbox labelPlacement="start" formControlName="isVolunteer">Volunteer</ion-checkbox>
      </ion-item>

      <ion-item class="mt-3" *ngIf="!profileForm.get('isVolunteer')?.value">
          <ion-checkbox labelPlacement="start" formControlName="isApplyForVolunteer">Apply for Volunteer</ion-checkbox>
      </ion-item>

      <ion-item class="mt-3">
          <ion-checkbox labelPlacement="start" formControlName="isStudent">Enroll as a Student</ion-checkbox>
      </ion-item>

      <ion-item *ngIf="profileForm.get('isStudent')?.value">
          <ion-label>Selected University: </ion-label>
          <ion-label label="Floating label">{{profileForm.get('university')?.value}}</ion-label>
      </ion-item>
      <nrna-error *ngIf="profileForm.get('isStudent')?.value" [form]="profileForm" [controlName]="'university'" [page]="'profile'"></nrna-error>

      <ion-button color="tertiary" expand="full" (click)="openPopOver($event)" *ngIf="profileForm.get('isStudent')?.value">Select University</ion-button>

      <ion-item class="mt-3">
          <ion-checkbox labelPlacement="start" formControlName="showPhoneNumber">Show Phone Number <br/> (visible to other users)</ion-checkbox>
      </ion-item>


          <div class="ion-text-center mt-3" (click)="submitProfileForm()"><ion-button>Submit</ion-button></div>

    </form>

    </ion-card-content>

  </ion-card>

</ion-content>